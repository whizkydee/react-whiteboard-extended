{"version":3,"sources":["eventBus.js","toolStore.js","components/shapes/line.js","smooth-path.js","components/shapes/pen.js","components/shapes/rect.js","components/shapes/circle.js","components/eraser.js","store.js","utils.js","components/whiteBoard.js","components/colorPicker.js","components/tools.js","components/history.js","index.js"],"names":["eventBus","EventBus","Object","classCallCheck","this","assign","START_PATH","MOVE_PATH","END_PATH","UNDO","REDO","TOOL_CHANGE","COLOR_CHANGE","PICK_VERSION","MOVE","listeners","event","cb","callbacks","indexOf","push","_arguments","arguments","forEach","callback","apply","POINTER","PEN","LINE","CIRCLE","RECT","ERASER","toolStore","ToolStore","id","on","toolChange","bind","colorChange","tool","color","emit","emitChanges","Line","concat","props","path","x","y","length","join","d","prepareData","react_default","a","createElement","fill","strokeWidth","stroke","React","Component","controlPoint","current","previous","next","reverse","o","pointA","pointB","lengthX","lengthY","Math","sqrt","pow","angle","atan2","line","PI","cos","sin","toCubicBezier","point","i","_controlPoint","_controlPoint2","slicedToArray","cpsX","cpsY","_controlPoint3","_controlPoint4","cpeX","cpeY","Pen","points","undefined","reduce","acc","smoothPath","map","_ref","Rect","width","abs","height","rect","Circle","cx","cy","r","circle","Eraser","collector","mapTools","store","Store","_this","startPath","movePath","endPath","undo","redo","pickVersion","move","data","shapes","Immutable","List","of","selected","mouseTracker","history","historyIndex","subscribe","toolType","position","class","type","selectShape","addVersion","addShapeToCanvas","shape","end","halfWidth","halfHeight","min","minX","toConsumableArray","p","maxX","max","minY","getShapeRect","objectSpread","_catHistory","splice","index","s","_ref2","WhiteBoard","possibleConstructorReturn","getPrototypeOf","call","preventContextMenu","preventDefault","setState","state","pressed","document","addEventListener","mouseDown","mouseMove","mouseUp","keyDown","window","onResize","_svg","getBoundingClientRect","e","round","clientX","left","clientY","top","right","bottom","_insideRect","mousePos","ctrlKey","keyCode","_this2","key","ref","canvas","onContextMenu","ColorPicker","colors","selectedColorIndex","selectedColor","style","display","backgroundColor","margin","borderStyle","border","onClick","handleClick","Tools","tools","label","className","colorPicker_ColorPicker","History","selectedIndex","versions","version","ReactDOM","render","tools_Tools","whiteBoard_WhiteBoard","history_History","getElementById"],"mappings":"4MAgCeA,EAAA,eA/Bb,SAAAC,IAAeC,OAAAC,EAAA,EAAAD,CAAAE,KAAAH,GAYbC,OAAOG,OAAOD,KAXD,CACXE,WAAY,YACZC,UAAW,WACXC,SAAU,UACVC,KAAM,OACNC,KAAM,OACNC,YAAa,aACbC,aAAc,cACdC,aAAc,cACdC,KAAM,SAGRV,KAAKW,UAAY,kDAGhBC,EAAOC,GACR,IAAIC,EAAYd,KAAKW,UAAUC,IAAU,IACV,IAA3BE,EAAUC,QAAQF,IAAYC,EAAUE,KAAKH,GACjDb,KAAKW,UAAUC,GAASE,+BAGrBF,GAAO,IAAAK,EAAAC,WAEMlB,KAAKW,UAAUC,IAAU,IAC/BO,QAAQ,SAAAC,GAChBA,EAASC,MAAM,GAAIH,uCCzBZI,EAAU,UACVC,EAAM,MACNC,EAAO,OACPC,EAAS,SACTC,EAAO,OACPC,EAAS,SA0BPC,EAAA,eAvBb,SAAAC,IAAe/B,OAAAC,EAAA,EAAAD,CAAAE,KAAA6B,GACb7B,KAAK8B,GAAK,YACVjC,EAASkC,GAAGlC,EAASU,YAAaP,KAAKgC,WAAWC,KAAKjC,OACvDH,EAASkC,GAAGlC,EAASW,aAAcR,KAAKkC,YAAYD,KAAKjC,OACzDA,KAAKmC,KAAOZ,EACZvB,KAAKoC,MAAQ,8DAELvB,GACRhB,EAASkC,GAAG/B,KAAK8B,GAAIjB,yCAGrBhB,EAASwC,KAAKrC,KAAK8B,uCAEVlB,EAAOuB,GAChBnC,KAAKmC,KAAOA,EACZnC,KAAKsC,kDAEK1B,EAAOwB,GACjBpC,KAAKoC,MAAQA,EACbpC,KAAKsC,wBC3BYC,wLASjB,MAPQ,MAAAC,OACDxC,KAAKyC,MAAMC,KAAK,GAAGC,EADlB,KAAAH,OACuBxC,KAAKyC,MAAMC,KAAK,GAAGE,GAD1C,KAAAJ,OAEDxC,KAAKyC,MAAMC,KAAK1C,KAAKyC,MAAMC,KAAKG,OAAS,GAAGF,EAF3C,KAAAH,OAGJxC,KAAKyC,MAAMC,KAAK1C,KAAKyC,MAAMC,KAAKG,OAAS,GAAGD,IAIvCE,KAAK,sCAId,IAAIC,EAAI/C,KAAKgD,cACb,OAAOC,EAAAC,EAAAC,cAAA,QAAMJ,EAAGA,EAAGK,KAAK,OAAOC,YAAa,EAAGC,OAAQtD,KAAKyC,MAAML,eAdpCmB,IAAMC,kBCOlCC,EAAe,SAACC,EAASC,EAAUC,EAAMC,GAC7C,IAGMC,EAbK,SAACC,EAAQC,GACpB,IAAMC,EAAUD,EAAO,GAAKD,EAAO,GAC7BG,EAAUF,EAAO,GAAKD,EAAO,GACnC,MAAO,CACLlB,OAAQsB,KAAKC,KAAKD,KAAKE,IAAIJ,EAAS,GAAKE,KAAKE,IAAIH,EAAS,IAC3DI,MAAOH,KAAKI,MAAML,EAASD,IAQnBO,CAHAb,GAAYD,EACZE,GAAQF,GAGZY,EAAQR,EAAEQ,OAAST,EAAUM,KAAKM,GAAK,GACvC5B,EAHY,GAGHiB,EAAEjB,OAGjB,MAAO,CAFGa,EAAQ,GAAKS,KAAKO,IAAIJ,GAASzB,EAC/Ba,EAAQ,GAAKS,KAAKQ,IAAIL,GAASzB,IAIrC+B,EAAgB,SAACC,EAAOC,EAAG5B,GAAM,IAAA6B,EAChBtB,EAAaP,EAAE4B,EAAI,GAAI5B,EAAE4B,EAAI,GAAID,GADjBG,EAAAlF,OAAAmF,EAAA,EAAAnF,CAAAiF,EAAA,GAC9BG,EAD8BF,EAAA,GACxBG,EADwBH,EAAA,GAAAI,EAEhB3B,EAAaoB,EAAO3B,EAAE4B,EAAI,GAAI5B,EAAE4B,EAAI,IAAI,GAFxBO,EAAAvF,OAAAmF,EAAA,EAAAnF,CAAAsF,EAAA,GAE9BE,EAF8BD,EAAA,GAExBE,EAFwBF,EAAA,GAGrC,WAAA7C,OAAY0C,EAAZ,MAAA1C,OAAqB2C,EAArB,KAAA3C,OAA6B8C,EAA7B,MAAA9C,OAAsC+C,EAAtC,KAAA/C,OAA8CqC,EAAM,GAApD,MAAArC,OAA2DqC,EAAM,SCrB9CW,wLAGjB,ODqBW,SAAoBC,GAAkC,IAA1BrE,EAA0BF,UAAA2B,OAAA,QAAA6C,IAAAxE,UAAA,GAAAA,UAAA,GAAf0D,EAEpD,OAAOa,EAAOE,OACZ,SAACC,EAAKf,EAAOC,EAAG5B,GAAhB,OACQ,IAAN4B,EAAA,KAAAtC,OAESqC,EAAM,GAFf,MAAArC,OAEsBqC,EAAM,IAF5B,GAAArC,OAIOoD,EAJP,KAAApD,OAIcpB,EAASyD,EAAOC,EAAG5B,KACnC,IC/BkB2C,CAAW7F,KAAKyC,MAAMC,KAAKoD,IAAI,SAAAC,GAAA,MAAc,CAAdA,EAAGpD,EAAHoD,EAAMnD,uCAKvD,IAAIG,EAAI/C,KAAKgD,cACb,OAAOC,EAAAC,EAAAC,cAAA,QAAMJ,EAAGA,EAAGK,KAAK,OAAOC,YAAa,EAAGC,OAAQtD,KAAKyC,MAAML,eARrCmB,IAAMC,WCDlBwC,wLAYjB,MAVW,CACTrD,EAAG3C,KAAKyC,MAAMC,KAAK,GAAGC,EACtBC,EAAG5C,KAAKyC,MAAMC,KAAK,GAAGE,EACtBqD,MAAO9B,KAAK+B,IACVlG,KAAKyC,MAAMC,KAAK1C,KAAKyC,MAAMC,KAAKG,OAAS,GAAGF,EAAI3C,KAAKyC,MAAMC,KAAK,GAAGC,GAErEwD,OAAQhC,KAAK+B,IACXlG,KAAKyC,MAAMC,KAAK1C,KAAKyC,MAAMC,KAAKG,OAAS,GAAGD,EAAI5C,KAAKyC,MAAMC,KAAK,GAAGE,qCAOvE,IAAIwD,EAAOpG,KAAKgD,cAChB,OACEC,EAAAC,EAAAC,cAAA,QACER,EAAGyD,EAAKzD,EACRC,EAAGwD,EAAKxD,EACRQ,KAAK,OACLC,YAAa,EACb4C,MAAOG,EAAKH,MACZE,OAAQC,EAAKD,OACb7C,OAAQtD,KAAKyC,MAAML,eAzBOmB,IAAMC,WCAnB6C,wLASjB,MAPa,CACXC,GAAItG,KAAKyC,MAAMC,KAAK,GAAGC,EACvB4D,GAAIvG,KAAKyC,MAAMC,KAAK,GAAGE,EACvB4D,EAAGrC,KAAK+B,IACNlG,KAAKyC,MAAMC,KAAK1C,KAAKyC,MAAMC,KAAKG,OAAS,GAAGF,EAAI3C,KAAKyC,MAAMC,KAAK,GAAGC,qCAOvE,IAAI8D,EAASzG,KAAKgD,cAClB,OACEC,EAAAC,EAAAC,cAAA,UACEC,KAAK,OACLoD,EAAGC,EAAOD,EACVF,GAAIG,EAAOH,GACXC,GAAIE,EAAOF,GACXlD,YAAa,EACbC,OAAQtD,KAAKyC,MAAML,eArBSmB,IAAMC,WCArBkD,wLAEjB,IAAI3D,EAAI,MAAAP,OAAMxC,KAAKyC,MAAMC,KAAK,GAAGC,EAAzB,KAAAH,OAA8BxC,KAAKyC,MAAMC,KAAK,GAAGE,IACrD+D,EAAY3G,KAAKyC,MAAMC,KAAKoD,IAAI,SAAAC,GAAA,IAAGpD,EAAHoD,EAAGpD,EAAGC,EAANmD,EAAMnD,EAAN,WAAAJ,OAAmBG,EAAnB,KAAAH,OAAwBI,KAC5D,OAAOG,EAAEP,OAAOmE,GAAW7D,KAAK,sCAIhC,IAAIC,EAAI/C,KAAKgD,cACb,OAAOC,EAAAC,EAAAC,cAAA,QAAMJ,EAAGA,EAAGK,KAAK,OAAOC,YAAa,GAAIC,OAAO,mBATvBC,IAAMC,kBCQnC,IAKDoD,EAAW,GACjBA,EAASpF,GAAQe,EACjBqE,EAASlF,GAAQsE,EACjBY,EAASnF,GAAU4E,EACnBO,EAASrF,GAAOiE,EAChBoB,EAASjF,GAAU+E,MAsIJG,EAAA,eAnIb,SAAAC,IAAc,IAAAC,EAAA/G,KAAAF,OAAAC,EAAA,EAAAD,CAAAE,KAAA8G,GACZ9G,KAAK8B,GAAK,kBACVjC,EAASkC,GAAGlC,EAASK,WAAYF,KAAKgH,UAAU/E,KAAKjC,OACrDH,EAASkC,GAAGlC,EAASM,UAAWH,KAAKiH,SAAShF,KAAKjC,OACnDH,EAASkC,GAAGlC,EAASO,SAAUJ,KAAKkH,QAAQjF,KAAKjC,OACjDH,EAASkC,GAAGlC,EAASQ,KAAML,KAAKmH,KAAKlF,KAAKjC,OAC1CH,EAASkC,GAAGlC,EAASS,KAAMN,KAAKoH,KAAKnF,KAAKjC,OAC1CH,EAASkC,GAAGlC,EAASY,aAAcT,KAAKqH,YAAYpF,KAAKjC,OACzDH,EAASkC,GAAGlC,EAASa,KAAMV,KAAKsH,KAAKrF,KAAKjC,OAE1CA,KAAKuH,KAAO,CACVC,OAAQC,IAAUC,KAAKC,KACvBC,SAAU,GACVC,aAAc,MAEhB7H,KAAK8H,QAAU,CAAC9H,KAAKuH,KAAKC,QAC1BxH,KAAK+H,cAAgB,EACrB/H,KAAKmC,KAAOqD,EACZxF,KAAKoC,MAAQ,QAEbP,EAAUmG,UAAU,WAClB,IAAM7F,EAAON,EAAUM,KACvB4E,EAAKkB,SAAW9F,EAChB4E,EAAK5E,KAAOyE,EAASzE,IAAS,KAC9B4E,EAAK3E,MAAQP,EAAUO,8DAGjBvB,GACRhB,EAASkC,GAAG/B,KAAK8B,GAAIjB,yCAGrBhB,EAASwC,KAAKrC,KAAK8B,sCAEXlB,EAAOsH,GACflI,KAAKuH,KAAKM,aAAe,CACvBM,MAAOnI,KAAKmC,KACZiG,KAAMpI,KAAKiI,SACXvF,KAAM,CAACwF,GACP9F,MAAOpC,KAAKoC,OAEVpC,KAAKiI,WAAa3G,GACpBtB,KAAKqI,YAAYH,GAEnBlI,KAAKsC,+CAEE1B,EAAOsH,GAEVlI,KAAKuH,KAAKM,eACZ7H,KAAKuH,KAAKM,aAAanF,KAAK1B,KAAKkH,GACjClI,KAAKsC,+CAGD1B,EAAOsH,GACTlI,KAAKuH,KAAKM,eACZ7H,KAAKuH,KAAKM,aAAanF,KAAK1B,KAAKkH,GAC7BlI,KAAKiI,WAAa3G,EACpBtB,KAAKsI,aACItI,KAAKuH,KAAKM,aAAaM,OAChCnI,KAAKuI,iBAAiBvI,KAAKuH,KAAKM,cAElC7H,KAAKuH,KAAKM,aAAe,KACzB7H,KAAKsC,wDAGQkG,GACfxI,KAAKuH,KAAKC,OAASxH,KAAKuH,KAAKC,OAAOxG,KAAKwH,GACzCxI,KAAKuH,KAAKM,aAAe,KACzB7H,KAAKsI,iDAEKJ,GACVlI,KAAKuH,KAAKC,OAASxH,KAAKuH,KAAKC,OAAO1B,IAAI,SAAA0C,GACtC,OC5F0B3D,ED4FNqD,EC5Fa9B,EAShC,SAAsBoC,GAC3B,IAAMC,EAAMD,EAAM9F,KAAKG,OAAS,EAChC,GAAI2F,EAAMJ,OAAS3G,EAAQ,CACzB,IAAMiH,EAAYvE,KAAK+B,IAAIsC,EAAM9F,KAAK,GAAGC,EAAI6F,EAAM9F,KAAK+F,GAAK9F,GACvDgG,EAAaxE,KAAK+B,IAAIsC,EAAM9F,KAAK,GAAGE,EAAI4F,EAAM9F,KAAK+F,GAAK7F,GAC9D,MAAO,CACLD,EAAGwB,KAAKyE,IAAIJ,EAAM9F,KAAK,GAAGC,EAAG6F,EAAM9F,KAAK+F,GAAK9F,GAAK+F,EAClD9F,EAAGuB,KAAKyE,IAAIJ,EAAM9F,KAAK,GAAGE,EAAG4F,EAAM9F,KAAK+F,GAAK7F,GAAK+F,EAClD1C,MAAO,EAAIyC,EACXvC,OAAQ,EAAIwC,GAET,GAAIH,EAAMJ,OAAS7G,EAAK,CAC7B,IAAMsH,EAAO1E,KAAKyE,IAALvH,MAAA8C,KAAIrE,OAAAgJ,EAAA,EAAAhJ,CAAQ0I,EAAM9F,KAAKoD,IAAI,SAAAiD,GAAC,OAAIA,EAAEpG,MACzCqG,EAAO7E,KAAK8E,IAAL5H,MAAA8C,KAAIrE,OAAAgJ,EAAA,EAAAhJ,CAAQ0I,EAAM9F,KAAKoD,IAAI,SAAAiD,GAAC,OAAIA,EAAEpG,MACzCuG,EAAO/E,KAAKyE,IAALvH,MAAA8C,KAAIrE,OAAAgJ,EAAA,EAAAhJ,CAAQ0I,EAAM9F,KAAKoD,IAAI,SAAAiD,GAAC,OAAIA,EAAEnG,MAE/C,MAAO,CACLD,EAAGkG,EACHjG,EAAGsG,EACHjD,MAAO+C,EAAOH,EACd1C,OALWhC,KAAK8E,IAAL5H,MAAA8C,KAAIrE,OAAAgJ,EAAA,EAAAhJ,CAAQ0I,EAAM9F,KAAKoD,IAAI,SAAAiD,GAAC,OAAIA,EAAEnG,MAK9BsG,GAEZ,OAAIV,EAAMJ,OAASzG,EAAe,GAEhC,CACLgB,EAAGwB,KAAKyE,IAAIJ,EAAM9F,KAAK,GAAGC,EAAG6F,EAAM9F,KAAK+F,GAAK9F,GAC7CC,EAAGuB,KAAKyE,IAAIJ,EAAM9F,KAAK,GAAGE,EAAG4F,EAAM9F,KAAK+F,GAAK7F,GAC7CqD,MAAO9B,KAAK+B,IAAIsC,EAAM9F,KAAK,GAAGC,EAAI6F,EAAM9F,KAAK+F,GAAK9F,GAClDwD,OAAQhC,KAAK+B,IAAIsC,EAAM9F,KAAK,GAAGE,EAAI4F,EAAM9F,KAAK+F,GAAK7F,IDuDrBuG,CAAaX,GC1F7C3D,EAAMlC,GAAKyD,EAAKzD,GAChBkC,EAAMlC,GAAKyD,EAAKzD,EAAIyD,EAAKH,OACzBpB,EAAMjC,GAAKwD,EAAKxD,GAChBiC,EAAMjC,GAAKwD,EAAKxD,EAAIwD,EAAKD,ODwFdrG,OAAAsJ,EAAA,EAAAtJ,CAAA,GAAK0I,EAAZ,CAAmBZ,UAAU,IAEtB9H,OAAAsJ,EAAA,EAAAtJ,CAAA,GAAK0I,EAAZ,CAAmBZ,UAAU,IC/F9B,IAAyB/C,EAAOuB,yCDoGnCpG,KAAKqJ,cACLrJ,KAAK8H,QAAQ9G,KAAKhB,KAAKuH,KAAKC,QAC5BxH,KAAK+H,cAAgB,iCAIjB/H,KAAK8H,QAAQjF,OAAS,KACG,IAAvB7C,KAAK+H,eAAqB/H,KAAK+H,aAAe/H,KAAK8H,QAAQjF,OAAS,GACxE7C,KAAKqH,YAAY,KAAMrH,KAAK+H,aAAe,mCAKzC/H,KAAK8H,QAAQjF,OAAS,GACxB7C,KAAKqH,YAAY,KAAMrH,KAAK+H,aAAe,yCAKzC/H,KAAK+H,cAAgB,GACvB/H,KAAK8H,QAAQwB,OACXtJ,KAAK+H,aAAe,EACpB/H,KAAK8H,QAAQjF,OAAS7C,KAAK+H,aAAe,uCAIpCnH,EAAO2I,GAEjB,GAAIvJ,KAAK8H,SAAW9H,KAAK8H,QAAQyB,GAAQ,CACvCvJ,KAAK+H,aAAewB,EACpB,IAAI/B,EAASxH,KAAK8H,QAAQyB,GAC1BvJ,KAAKuH,KAAKC,OAASA,EACnBxH,KAAKsC,4CAGJ1B,KAAwB,IAAf4H,EAAezC,EAAfyC,MAAOlB,EAAQvB,EAARuB,KACnBtH,KAAKuH,KAAKC,OAASxH,KAAKuH,KAAKC,OAAO1B,IAAI,SAAA0D,GACtC,OAAIhB,IAAUgB,EACL1J,OAAAsJ,EAAA,EAAAtJ,CAAA,GACF0J,EADL,CAEE9G,KAAM8G,EAAE9G,KAAKoD,IAAI,SAAA2D,GAAA,IAAG9G,EAAH8G,EAAG9G,EAAGC,EAAN6G,EAAM7G,EAAN,MAAe,CAC9BD,EAAGA,EAAI2E,EAAK3E,EACZC,EAAGA,EAAI0E,EAAK1E,OAIT4G,cEhJME,cACnB,SAAAA,IAAc,IAAA3C,EAAA,OAAAjH,OAAAC,EAAA,EAAAD,CAAAE,KAAA0J,IACZ3C,EAAAjH,OAAA6J,EAAA,EAAA7J,CAAAE,KAAAF,OAAA8J,EAAA,EAAA9J,CAAA4J,GAAAG,KAAA7J,QA2DF8J,mBAAqB,SAAAlJ,GAEnB,OADAA,EAAMmJ,kBACC,GA3DPjD,EAAMkB,UAAU,WACdjB,EAAKiD,SAAS,CAAEzC,KAAMT,EAAMS,SAE9BR,EAAKkD,MAAQ,CAAE1C,KAAMT,EAAMS,MAC3BR,EAAKmD,SAAU,EAPHnD,mFAWZoD,SAASC,iBAAiB,YAAapK,KAAKqK,UAAUpI,KAAKjC,OAC3DmK,SAASC,iBAAiB,YAAapK,KAAKsK,UAAUrI,KAAKjC,OAC3DmK,SAASC,iBAAiB,UAAWpK,KAAKuK,QAAQtI,KAAKjC,OACvDmK,SAASC,iBAAiB,UAAWpK,KAAKwK,QAAQvI,KAAKjC,OACvDyK,OAAOL,iBAAiB,SAAUpK,KAAK0K,SAASzI,KAAKjC,OAErDA,KAAK0K,WACL1K,KAAKgK,SAAS,CAAEzC,KAAMT,EAAMS,0CAI5BvH,KAAKoG,KAAOpG,KAAK2K,KAAKC,yDAGfC,GAEP,MAAO,CACLlI,EAFU,EAECwB,KAAK2G,MAAMD,EAAEE,QAFd,GAEiC/K,KAAKoG,KAAK4E,KACrDpI,EAHU,EAGCuB,KAAK2G,MAAMD,EAAEI,QAHd,GAGiCjL,KAAKoG,KAAK8E,yCAI7C9E,EAAMvB,GAChB,OACEA,EAAMlC,EAAIyD,EAAK4E,MACfnG,EAAMlC,EAAIyD,EAAK+E,OACftG,EAAMjC,EAAIwD,EAAK8E,KACfrG,EAAMjC,EAAIwD,EAAKgF,yCAITP,GACJ7K,KAAKqL,YAAYrL,KAAKoG,KAAM,CAAEzD,EAAGkI,EAAEE,QAASnI,EAAGiI,EAAEI,YACnDjL,KAAKkK,SAAU,EACfrK,EAASwC,KAAKxC,EAASK,WAAYF,KAAKsL,SAAST,uCAI3CA,GACJ7K,KAAKkK,SACPrK,EAASwC,KAAKxC,EAASM,UAAWH,KAAKsL,SAAST,oCAI5CA,GACN7K,KAAKkK,SAAU,EACfrK,EAASwC,KAAKxC,EAASO,SAAUJ,KAAKsL,SAAST,oCAQzCjK,GACN,GAAIA,EAAM2K,QACR,OAAQ3K,EAAM4K,SACZ,KAAK,GACH3L,EAASwC,KAAKxC,EAASQ,MACvB,MACF,KAAK,GACHR,EAASwC,KAAKxC,EAASS,sCAMxBkI,GACL,OAAO,SAAAlB,GACLzH,EAASwC,KAAKxC,EAASa,KAAM,CAAE8H,QAAOlB,2CAIjC,IAAAmE,EAAAzL,KACDuH,EAAOvH,KAAKiK,MAAM1C,KAClBC,EAASD,EAAKC,OAAO1B,IAAI,SAAC0C,EAAO1D,GACrC,OAAO7B,EAAAC,EAAAC,cAACqF,EAAML,MAAP,CAAauD,IAAK5G,EAAGpC,KAAM8F,EAAM9F,KAAMN,MAAOoG,EAAMpG,UAEzDsB,EAAU,KAUd,OATI6D,EAAKM,cAAgBN,EAAKM,aAAaM,QACzCzE,EACET,EAAAC,EAAAC,cAACoE,EAAKM,aAAaM,MAAnB,CACE/F,MAAOmF,EAAKM,aAAazF,MACzBM,KAAM6E,EAAKM,aAAanF,QAM5BO,EAAAC,EAAAC,cAAA,OACErB,GAAG,aACHmE,MAAOjG,KAAKyC,MAAMwD,MAClBE,OAAQnG,KAAKyC,MAAM0D,OACnBwF,IAAK,SAAAC,GAAM,OAAKH,EAAKd,KAAOiB,GAC5BC,cAAe7L,KAAK8J,oBAEnBtC,EACA9D,UA7G+BH,IAAMC,WCAzBsI,cACnB,SAAAA,IAAc,IAAA/E,EAAA,OAAAjH,OAAAC,EAAA,EAAAD,CAAAE,KAAA8L,IACZ/E,EAAAjH,OAAA6J,EAAA,EAAA7J,CAAAE,KAAAF,OAAA8J,EAAA,EAAA9J,CAAAgM,GAAAjC,KAAA7J,QACKiK,MAAQ,CACX8B,OAAQ,CACN,MACA,SACA,SACA,QACA,OACA,SACA,SACA,SAEFC,mBAAoB,GAEtBnK,EAAUmG,UAAU,WAClB,IAAIiE,EAAgBpK,EAAUO,MAC1B4J,EAAqBjF,EAAKkD,MAAM8B,OAAOhL,QAAQkL,GACnDlF,EAAKiD,SAAS,CAAEgC,mBAAoBA,MAlB1BjF,2EAqBFwC,GACV,OAAO,WACL1J,EAASwC,KAAKxC,EAASW,aAAcR,KAAKiK,MAAM8B,OAAOxC,sCAIlD,IAAAkC,EAAAzL,KACH+L,EAAS/L,KAAKiK,MAAM8B,OAAOjG,IAAI,SAAC1D,EAAO0C,GACzC,IAAIoH,EAAQ,CACVC,QAAS,OACTC,gBAAiBhK,EACjB6D,MAAO,GACPE,OAAQ,GACRkG,OAAQ,GAENC,EAAc,CAChBH,QAAS,OACTI,OAAQd,EAAKxB,MAAM+B,qBAAuBlH,EAAI,YAAc,GAC5DuH,OAAQ,GAGV,OACEpJ,EAAAC,EAAAC,cAAA,OAAKuI,IAAK5G,EAAGoH,MAAOI,GAClBrJ,EAAAC,EAAAC,cAAA,OAAK+I,MAAOA,EAAOM,QAASf,EAAKgB,YAAY3H,GAAG7C,KAAKwJ,QAK3D,OAAOxI,EAAAC,EAAAC,cAAA,OAAKrB,GAAG,UAAR,IAAmBiK,EAAnB,YAlD8BxI,IAAMC,WCC1BkJ,cACnB,SAAAA,IAAc,IAAA3F,EAAA,OAAAjH,OAAAC,EAAA,EAAAD,CAAAE,KAAA0M,IACZ3F,EAAAjH,OAAA6J,EAAA,EAAA7J,CAAAE,KAAAF,OAAA8J,EAAA,EAAA9J,CAAA4M,GAAA7C,KAAA7J,QACKiK,MAAQ,CACX0C,MAAO,CACL,CAAE7K,GAAIR,EAASsL,MAAO,mBAAoBxE,KAAM,UAChD,CAAEtG,GAAIN,EAAMoL,MAAO,WAAYxE,KAAM,QACrC,CAAEtG,GAAIJ,EAAMkL,MAAO,cAAexE,KAAM,QACxC,CAAEtG,GAAIL,EAAQmL,MAAO,iBAAkBxE,KAAM,UAC7C,CAAEtG,GAAIP,EAAKqL,MAAO,YAAaxE,KAAM,MAAOR,UAAU,GACtD,CAAE9F,GAAIH,EAAQiL,MAAO,YAAaxE,KAAM,YAG5CvG,EAAUmG,UAAU,WAClB,IAAM2E,EAAQ5F,EAAKkD,MAAM0C,MAAM7G,IAAI,SAAA3D,GAAI,OAAArC,OAAAsJ,EAAA,EAAAtJ,CAAA,GAClCqC,EADkC,CAErCyF,SAAU/F,EAAUM,OAASA,EAAKL,OAEpCiF,EAAKiD,SAAS,CAAE2C,YAjBN5F,2EAoBFwC,GACV,OAAO,WACL1J,EAASwC,KAAKxC,EAASU,YAAaP,KAAKiK,MAAM0C,MAAMpD,GAAOzH,sCAIvD,IAAA2J,EAAAzL,KACD2M,EAAQ3M,KAAKiK,MAAM0C,MAAM7G,IAAI,SAAC3D,EAAM2C,GAAP,OACjC7B,EAAAC,EAAAC,cAAA,OACEuI,IAAK5G,EACL0H,QAASf,EAAKgB,YAAY3H,GAAG7C,KAAKwJ,GAClCoB,UAAW1K,EAAKyF,SAAW,WAAa,IAExC3E,EAAAC,EAAAC,cAAA,KAAG0J,UAAW1K,EAAKyK,MAAQ,WAG/B,OACE3J,EAAAC,EAAAC,cAAA,OAAKrB,GAAG,SACL6K,EACD1J,EAAAC,EAAAC,cAAC2J,EAAD,cAxC2BvJ,IAAMC,WCDpBuJ,cACnB,SAAAA,IAAc,IAAAhG,EAAA,OAAAjH,OAAAC,EAAA,EAAAD,CAAAE,KAAA+M,GACZhG,EAAAjH,OAAA6J,EAAA,EAAA7J,CAAAE,KAAAF,OAAA8J,EAAA,EAAA9J,CAAAiN,GAAAlD,KAAA7J,OAEA8G,EAAMkB,UAAU,WACdjB,EAAKiD,SAAS,CACZlC,QAAShB,EAAMgB,QACfkF,cAAelG,EAAMiB,iBAIzBhB,EAAKkD,MAAQ,CACXnC,QAAS,GACTkF,eAAgB,GAZNjG,2EAgBFwC,GACV,OAAO,WACL1J,EAASwC,KAAKxC,EAASY,aAAc8I,qCAIhC,IAAAkC,EAAAzL,KACHiN,EAAWjN,KAAKiK,MAAMnC,QAAQhC,IAAI,SAACoH,EAASpI,GAAV,OACpC7B,EAAAC,EAAAC,cAAA,QACEuI,IAAK5G,EACL0H,QAASf,EAAKgB,YAAY3H,GAAG7C,KAAKwJ,GAClCoB,UAAWpB,EAAKxB,MAAM+C,gBAAkBlI,EAAI,WAAa,OAG7D,OAAO7B,EAAAC,EAAAC,cAAA,OAAKrB,GAAG,WAAR,aAA6BmL,EAA7B,YA/B0B1J,IAAMC,WCE3C2J,IAASC,OACPnK,EAAAC,EAAAC,cAAA,OAAKrB,GAAG,QACNmB,EAAAC,EAAAC,cAAA,OAAKrB,GAAG,aACNmB,EAAAC,EAAAC,cAACkK,EAAD,MACApK,EAAAC,EAAAC,cAACmK,EAAD,OAEFrK,EAAAC,EAAAC,cAACoK,EAAD,OAEFpD,SAASqD,eAAe","file":"static/js/main.df869e76.chunk.js","sourcesContent":["class EventBus {\n  constructor() {\n    let events = {\n      START_PATH: 'startPath',\n      MOVE_PATH: 'movePath',\n      END_PATH: 'endPath',\n      UNDO: 'undo',\n      REDO: 'redo',\n      TOOL_CHANGE: 'toolChange',\n      COLOR_CHANGE: 'cororChange',\n      PICK_VERSION: 'pickVersion',\n      MOVE: 'move'\n    };\n    Object.assign(this, events);\n    this.listeners = {};\n  }\n\n  on(event, cb) {\n    let callbacks = this.listeners[event] || [];\n    if (callbacks.indexOf(cb) === -1) callbacks.push(cb);\n    this.listeners[event] = callbacks;\n  }\n\n  emit(event) {\n    // console.log(arguments)\n    let callbacks = this.listeners[event] || [];\n    callbacks.forEach(callback => {\n      callback.apply({}, arguments);\n    });\n  }\n}\n\nexport default new EventBus();\n","import EventBus from './eventBus';\n\nexport const POINTER = 'Pointer';\nexport const PEN = 'Pen';\nexport const LINE = 'Line';\nexport const CIRCLE = 'Elipse';\nexport const RECT = 'Rect';\nexport const ERASER = 'Eraser';\n\nclass ToolStore {\n  constructor() {\n    this.id = 'toolStore';\n    EventBus.on(EventBus.TOOL_CHANGE, this.toolChange.bind(this));\n    EventBus.on(EventBus.COLOR_CHANGE, this.colorChange.bind(this));\n    this.tool = PEN;\n    this.color = 'black';\n  }\n  subscribe(cb) {\n    EventBus.on(this.id, cb);\n  }\n  emitChanges() {\n    EventBus.emit(this.id);\n  }\n  toolChange(event, tool) {\n    this.tool = tool;\n    this.emitChanges();\n  }\n  colorChange(event, color) {\n    this.color = color;\n    this.emitChanges();\n  }\n}\n\nexport default new ToolStore();\n","import React from 'react';\n\nexport default class Line extends React.Component {\n  prepareData() {\n    let d = [\n      `M ${this.props.path[0].x} ${this.props.path[0].y}`,\n      `L ${this.props.path[this.props.path.length - 1].x} ${\n        this.props.path[this.props.path.length - 1].y\n      }`\n    ];\n\n    return d.join(' ');\n  }\n\n  render() {\n    let d = this.prepareData();\n    return <path d={d} fill=\"none\" strokeWidth={3} stroke={this.props.color} />;\n  }\n}\n","const line = (pointA, pointB) => {\n  const lengthX = pointB[0] - pointA[0];\n  const lengthY = pointB[1] - pointA[1];\n  return {\n    length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),\n    angle: Math.atan2(lengthY, lengthX)\n  };\n};\n\nconst controlPoint = (current, previous, next, reverse) => {\n  const p = previous || current;\n  const n = next || current;\n  const smoothing = 0.2;\n  const o = line(p, n);\n  const angle = o.angle + (reverse ? Math.PI : 0);\n  const length = o.length * smoothing;\n  const x = current[0] + Math.cos(angle) * length;\n  const y = current[1] + Math.sin(angle) * length;\n  return [x, y];\n};\n\nconst toCubicBezier = (point, i, a) => {\n  const [cpsX, cpsY] = controlPoint(a[i - 1], a[i - 2], point);\n  const [cpeX, cpeY] = controlPoint(point, a[i - 1], a[i + 1], true);\n  return `C ${cpsX}, ${cpsY} ${cpeX}, ${cpeY} ${point[0]}, ${point[1]}`;\n};\n\nexport default function smoothPath(points, callback = toCubicBezier) {\n  // build the 'd' attribute by looping over the points\n  return points.reduce(\n    (acc, point, i, a) =>\n      i === 0\n        ? // if first point\n          `M ${point[0]}, ${point[1]}`\n        : // else\n          `${acc} ${callback(point, i, a)}`,\n    ''\n  );\n};\n","import React from 'react';\nimport smoothPath from '../../smooth-path';\n\nexport default class Pen extends React.Component {\n  prepareData() {\n    const collector = smoothPath(this.props.path.map(({ x, y }) => [x, y]));\n    return collector;\n  }\n\n  render() {\n    let d = this.prepareData();\n    return <path d={d} fill=\"none\" strokeWidth={3} stroke={this.props.color} />;\n  }\n}\n","import React from 'react';\n\nexport default class Rect extends React.Component {\n  prepareData() {\n    let rect = {\n      x: this.props.path[0].x,\n      y: this.props.path[0].y,\n      width: Math.abs(\n        this.props.path[this.props.path.length - 1].x - this.props.path[0].x\n      ),\n      height: Math.abs(\n        this.props.path[this.props.path.length - 1].y - this.props.path[0].y\n      )\n    };\n    return rect;\n  }\n\n  render() {\n    let rect = this.prepareData();\n    return (\n      <rect\n        x={rect.x}\n        y={rect.y}\n        fill=\"none\"\n        strokeWidth={3}\n        width={rect.width}\n        height={rect.height}\n        stroke={this.props.color}\n      />\n    );\n  }\n}\n","import React from 'react';\n\nexport default class Circle extends React.Component {\n  prepareData() {\n    let circle = {\n      cx: this.props.path[0].x,\n      cy: this.props.path[0].y,\n      r: Math.abs(\n        this.props.path[this.props.path.length - 1].x - this.props.path[0].x\n      )\n    };\n    return circle;\n  }\n\n  render() {\n    let circle = this.prepareData();\n    return (\n      <circle\n        fill=\"none\"\n        r={circle.r}\n        cx={circle.cx}\n        cy={circle.cy}\n        strokeWidth={3}\n        stroke={this.props.color}\n      />\n    );\n  }\n}\n","import React from 'react';\n\nexport default class Eraser extends React.Component {\n  prepareData() {\n    let d = [`M ${this.props.path[0].x} ${this.props.path[0].y}`];\n    let collector = this.props.path.map(({ x, y }) => `L ${x} ${y}`);\n    return d.concat(collector).join(' ');\n  }\n\n  render() {\n    let d = this.prepareData();\n    return <path d={d} fill=\"none\" strokeWidth={20} stroke=\"#ffffff\" />;\n  }\n}\n","import Immutable from 'immutable';\nimport EventBus from './eventBus';\nimport ToolStore, { POINTER, PEN, LINE, CIRCLE, RECT, ERASER } from './toolStore';\nimport Line from './components/shapes/line';\nimport Pen from './components/shapes/pen';\nimport Rect from './components/shapes/rect';\nimport Circle from './components/shapes/circle';\nimport Eraser from './components/eraser';\nimport { pointInsideRect, getShapeRect } from './utils';\n\nexport const SELECT = 'Select';\nexport const DRAW = 'Draw';\nexport const MOVE = 'Move';\nexport const RESIZE = 'Resize';\n\nconst mapTools = {};\nmapTools[LINE] = Line;\nmapTools[RECT] = Rect;\nmapTools[CIRCLE] = Circle;\nmapTools[PEN] = Pen;\nmapTools[ERASER] = Eraser;\n\nclass Store {\n  constructor() {\n    this.id = 'whiteBoardStore';\n    EventBus.on(EventBus.START_PATH, this.startPath.bind(this));\n    EventBus.on(EventBus.MOVE_PATH, this.movePath.bind(this));\n    EventBus.on(EventBus.END_PATH, this.endPath.bind(this));\n    EventBus.on(EventBus.UNDO, this.undo.bind(this));\n    EventBus.on(EventBus.REDO, this.redo.bind(this));\n    EventBus.on(EventBus.PICK_VERSION, this.pickVersion.bind(this));\n    EventBus.on(EventBus.MOVE, this.move.bind(this));\n\n    this.data = {\n      shapes: Immutable.List.of(),\n      selected: [],\n      mouseTracker: null\n    };\n    this.history = [this.data.shapes];\n    this.historyIndex = -1;\n    this.tool = Pen;\n    this.color = 'black';\n\n    ToolStore.subscribe(() => {\n      const tool = ToolStore.tool;\n      this.toolType = tool;\n      this.tool = mapTools[tool] || null;\n      this.color = ToolStore.color;\n    });\n  }\n  subscribe(cb) {\n    EventBus.on(this.id, cb);\n  }\n  emitChanges() {\n    EventBus.emit(this.id);\n  }\n  startPath(event, position) {\n    this.data.mouseTracker = {\n      class: this.tool,\n      type: this.toolType,\n      path: [position],\n      color: this.color\n    };\n    if (this.toolType === POINTER) {\n      this.selectShape(position);\n    }\n    this.emitChanges();\n  }\n  movePath(event, position) {\n    //console.log('position',position)\n    if (this.data.mouseTracker) {\n      this.data.mouseTracker.path.push(position);\n      this.emitChanges();\n    }\n  }\n  endPath(event, position) {\n    if (this.data.mouseTracker) {\n      this.data.mouseTracker.path.push(position);\n      if (this.toolType === POINTER) {\n        this.addVersion();\n      } else if (this.data.mouseTracker.class) {\n        this.addShapeToCanvas(this.data.mouseTracker);\n      }\n      this.data.mouseTracker = null;\n      this.emitChanges();\n    }\n  }\n  addShapeToCanvas(shape) {\n    this.data.shapes = this.data.shapes.push(shape);\n    this.data.mouseTracker = null;\n    this.addVersion();\n  }\n  selectShape(position) {\n    this.data.shapes = this.data.shapes.map(shape => {\n      if (pointInsideRect(position, getShapeRect(shape))) {\n        return { ...shape, selected: true };\n      } else {\n        return { ...shape, selected: false };\n      }\n    });\n  }\n  addVersion() {\n    this._catHistory();\n    this.history.push(this.data.shapes);\n    this.historyIndex = -1;\n  }\n\n  undo() {\n    if (this.history.length > 0) {\n      if (this.historyIndex === -1) this.historyIndex = this.history.length - 1;\n      this.pickVersion(null, this.historyIndex - 1);\n    }\n  }\n\n  redo() {\n    if (this.history.length > 0) {\n      this.pickVersion(null, this.historyIndex + 1);\n    }\n  }\n\n  _catHistory() {\n    if (this.historyIndex >= 0) {\n      this.history.splice(\n        this.historyIndex + 1,\n        this.history.length - this.historyIndex - 1\n      );\n    }\n  }\n  pickVersion(event, index) {\n    // console.log(index);\n    if (this.history && this.history[index]) {\n      this.historyIndex = index;\n      let shapes = this.history[index];\n      this.data.shapes = shapes;\n      this.emitChanges();\n    }\n  }\n  move(event, { shape, move }) {\n    this.data.shapes = this.data.shapes.map(s => {\n      if (shape === s) {\n        return {\n          ...s,\n          path: s.path.map(({ x, y }) => ({\n            x: x + move.x,\n            y: y + move.y\n          }))\n        };\n      } else {\n        return s;\n      }\n    });\n  }\n}\n\nexport default new Store();\n","import { CIRCLE, PEN, ERASER } from './toolStore';\n\nexport function pointInsideRect(point, rect) {\n  return (\n    point.x >= rect.x &&\n    point.x <= rect.x + rect.width &&\n    point.y >= rect.y &&\n    point.y <= rect.y + rect.height\n  );\n}\n\nexport function getShapeRect(shape) {\n  const end = shape.path.length - 1;\n  if (shape.type === CIRCLE) {\n    const halfWidth = Math.abs(shape.path[0].x - shape.path[end].x);\n    const halfHeight = Math.abs(shape.path[0].y - shape.path[end].y);\n    return {\n      x: Math.min(shape.path[0].x, shape.path[end].x) - halfWidth,\n      y: Math.min(shape.path[0].y, shape.path[end].y) - halfHeight,\n      width: 2 * halfWidth,\n      height: 2 * halfHeight\n    };\n  } else if (shape.type === PEN) {\n    const minX = Math.min(...shape.path.map(p => p.x));\n    const maxX = Math.max(...shape.path.map(p => p.x));\n    const minY = Math.min(...shape.path.map(p => p.y));\n    const maxY = Math.max(...shape.path.map(p => p.y));\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  } else if (shape.type === ERASER) return { /* new empty object */ };\n  else {\n    return {\n      x: Math.min(shape.path[0].x, shape.path[end].x),\n      y: Math.min(shape.path[0].y, shape.path[end].y),\n      width: Math.abs(shape.path[0].x - shape.path[end].x),\n      height: Math.abs(shape.path[0].y - shape.path[end].y)\n    };\n  }\n}\n","import React from 'react';\nimport EventBus from '../eventBus';\nimport Store from '../store';\n\nexport default class WhiteBoard extends React.Component {\n  constructor() {\n    super();\n\n    Store.subscribe(() => {\n      this.setState({ data: Store.data });\n    });\n    this.state = { data: Store.data };\n    this.pressed = false;\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.mouseDown.bind(this));\n    document.addEventListener('mousemove', this.mouseMove.bind(this));\n    document.addEventListener('mouseup', this.mouseUp.bind(this));\n    document.addEventListener('keydown', this.keyDown.bind(this));\n    window.addEventListener('resize', this.onResize.bind(this));\n\n    this.onResize();\n    this.setState({ data: Store.data });\n  }\n\n  onResize() {\n    this.rect = this._svg.getBoundingClientRect();\n  }\n\n  mousePos(e) {\n    let round = 2;\n    return {\n      x: round * Math.round(e.clientX / round) - this.rect.left,\n      y: round * Math.round(e.clientY / round) - this.rect.top\n    };\n  }\n\n  _insideRect(rect, point) {\n    return (\n      point.x > rect.left &&\n      point.x < rect.right &&\n      point.y > rect.top &&\n      point.y < rect.bottom\n    );\n  }\n\n  mouseDown(e) {\n    if (this._insideRect(this.rect, { x: e.clientX, y: e.clientY })) {\n      this.pressed = true;\n      EventBus.emit(EventBus.START_PATH, this.mousePos(e));\n    }\n  }\n\n  mouseMove(e) {\n    if (this.pressed) {\n      EventBus.emit(EventBus.MOVE_PATH, this.mousePos(e));\n    }\n  }\n\n  mouseUp(e) {\n    this.pressed = false;\n    EventBus.emit(EventBus.END_PATH, this.mousePos(e));\n  }\n\n  preventContextMenu = event => {\n    event.preventDefault();\n    return false;\n  };\n\n  keyDown(event) {\n    if (event.ctrlKey) {\n      switch (event.keyCode) {\n        case 90: // KeyZ\n          EventBus.emit(EventBus.UNDO);\n          break;\n        case 89: // KeyY\n          EventBus.emit(EventBus.REDO);\n          break;\n        default: // do nothing.\n      }\n    }\n  }\n  onMove(shape) {\n    return move => {\n      EventBus.emit(EventBus.MOVE, { shape, move });\n    };\n  }\n\n  render() {\n    const data = this.state.data;\n    const shapes = data.shapes.map((shape, i) => {\n      return <shape.class key={i} path={shape.path} color={shape.color} />;\n    });\n    let current = null;\n    if (data.mouseTracker && data.mouseTracker.class) {\n      current = (\n        <data.mouseTracker.class\n          color={data.mouseTracker.color}\n          path={data.mouseTracker.path}\n        />\n      );\n    }\n\n    return (\n      <svg\n        id=\"whiteBoard\"\n        width={this.props.width}\n        height={this.props.height}\n        ref={canvas => (this._svg = canvas)}\n        onContextMenu={this.preventContextMenu}\n      >\n        {shapes}\n        {current}\n      </svg>\n    );\n  }\n}\n","import React from 'react';\nimport EventBus from '../eventBus';\nimport ToolStore from '../toolStore';\n\nexport default class ColorPicker extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      colors: [\n        'red',\n        'orange',\n        'yellow',\n        'green',\n        'blue',\n        'indigo',\n        'violet',\n        'black'\n      ],\n      selectedColorIndex: 7\n    };\n    ToolStore.subscribe(() => {\n      let selectedColor = ToolStore.color;\n      let selectedColorIndex = this.state.colors.indexOf(selectedColor);\n      this.setState({ selectedColorIndex: selectedColorIndex });\n    });\n  }\n  handleClick(index) {\n    return function() {\n      EventBus.emit(EventBus.COLOR_CHANGE, this.state.colors[index]);\n    };\n  }\n\n  render() {\n    let colors = this.state.colors.map((color, i) => {\n      let style = {\n        display: 'flex',\n        backgroundColor: color,\n        width: 20,\n        height: 20,\n        margin: 5\n      };\n      let borderStyle = {\n        display: 'flex',\n        border: this.state.selectedColorIndex === i ? '1px solid' : '',\n        margin: 1\n      };\n\n      return (\n        <div key={i} style={borderStyle}>\n          <div style={style} onClick={this.handleClick(i).bind(this)} />\n        </div>\n      );\n    });\n\n    return <div id=\"colors\"> {colors} </div>;\n  }\n}\n","import React from 'react';\nimport EventBus from '../eventBus';\nimport ToolStore, { POINTER, PEN, LINE, CIRCLE, RECT, ERASER } from '../toolStore';\nimport ColorPicker from './colorPicker';\n\nexport default class Tools extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      tools: [\n        { id: POINTER, label: 'fa-mouse-pointer', type: 'cursor' },\n        { id: LINE, label: 'fa-minus', type: 'line' },\n        { id: RECT, label: 'fa-square-o', type: 'rect' },\n        { id: CIRCLE, label: 'fa-circle-thin', type: 'circle' },\n        { id: PEN, label: 'fa-pencil', type: 'pen', selected: true },\n        { id: ERASER, label: 'fa-eraser', type: 'eraser' }\n      ]\n    };\n    ToolStore.subscribe(() => {\n      const tools = this.state.tools.map(tool => ({\n        ...tool,\n        selected: ToolStore.tool === tool.id\n      }));\n      this.setState({ tools });\n    });\n  }\n  handleClick(index) {\n    return function() {\n      EventBus.emit(EventBus.TOOL_CHANGE, this.state.tools[index].id);\n    };\n  }\n\n  render() {\n    const tools = this.state.tools.map((tool, i) => (\n      <div\n        key={i}\n        onClick={this.handleClick(i).bind(this)}\n        className={tool.selected ? 'selected' : ''}\n      >\n        <i className={tool.label + ' fa'} />\n      </div>\n    ));\n    return (\n      <div id=\"tools\">\n        {tools}\n        <ColorPicker />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport EventBus from '../eventBus';\nimport Store from '../store';\n\nexport default class History extends React.Component {\n  constructor() {\n    super();\n\n    Store.subscribe(() => {\n      this.setState({\n        history: Store.history,\n        selectedIndex: Store.historyIndex\n      });\n    });\n\n    this.state = {\n      history: [],\n      selectedIndex: -1\n    };\n  }\n\n  handleClick(index) {\n    return function() {\n      EventBus.emit(EventBus.PICK_VERSION, index);\n    };\n  }\n\n  render() {\n    let versions = this.state.history.map((version, i) => (\n      <span\n        key={i}\n        onClick={this.handleClick(i).bind(this)}\n        className={this.state.selectedIndex === i ? 'selected' : ''}\n      />\n    ));\n    return <div id=\"history\"> History: {versions} </div>;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport WhiteBoard from './components/whiteBoard';\nimport Tools from './components/tools';\nimport History from './components/history';\n\nReactDOM.render(\n  <div id=\"main\">\n    <div id=\"container\">\n      <Tools />\n      <WhiteBoard />\n    </div>\n    <History />\n  </div>,\n  document.getElementById('app')\n);\n"],"sourceRoot":""}