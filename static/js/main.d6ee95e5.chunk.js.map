{"version":3,"sources":["eventBus.js","toolStore.js","components/shapes/line.js","components/shapes/pen.js","components/shapes/rect.js","components/shapes/circle.js","utils.js","store.js","components/selection.js","components/whiteBoard.js","components/colorPicker.js","components/tools.js","components/history.js","index.js"],"names":["eventBus","EventBus","Object","classCallCheck","this","assign","START_PATH","MOVE_PATH","END_PATH","UNDO","REDO","TOOL_CHANGE","COLOR_CHANGE","PICK_VERSION","MOVE","listeners","event","cb","callbacks","indexOf","push","_arguments","arguments","forEach","callback","apply","POINTER","PEN","LINE","CIRCLE","RECT","toolStore","ToolStore","id","on","toolChange","bind","colorChange","tool","color","emit","emitChanges","Line","concat","props","path","x","y","length","join","d","prepareData","react_default","a","createElement","fill","strokeWidth","stroke","React","Component","Pen","collector","map","point","xNext","yNext","Rect","width","Math","abs","height","rect","Circle","cx","cy","r","circle","getShapeRect","shape","end","type","halfWidth","halfHeight","min","minX","toConsumableArray","p","maxX","max","minY","mapTools","store","Store","_this","startPath","movePath","endPath","undo","redo","pickVersion","move","data","shapes","Immutable","List","of","selected","mouseTracker","history","historyIndex","subscribe","toolType","position","class","selectShape","addVersion","addShapeToCanvas","objectSpread","_catHistory","splice","index","_ref","s","_ref2","Selection","possibleConstructorReturn","getPrototypeOf","call","startMove","assertThisInitialized","endMove","onMove","startPoint","e","preventDefault","clientX","clientY","onMouseUp","onMouseMove","onMouseDown","WhiteBoard","setState","state","pressed","document","addEventListener","mouseDown","mouseMove","mouseUp","keyDown","window","onResize","_svg","getBoundingClientRect","round","left","top","right","bottom","_insideRect","mousePos","keyCode","_this2","selection","i","selection_Selection","key","current","ref","canvas","ColorPicker","colors","selectedColorIndex","selectedColor","style","display","backgroundColor","margin","borderStyle","border","onClick","handleClick","Tools","tools","label","className","colorPicker_ColorPicker","History","selectedIndex","versions","version","ReactDOM","render","tools_Tools","whiteBoard_WhiteBoard","history_History","getElementById"],"mappings":"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","file":"static/js/main.d6ee95e5.chunk.js","sourcesContent":["class EventBus {\n  constructor() {\n    let events = {\n      START_PATH: 'startPath',\n      MOVE_PATH: 'movePath',\n      END_PATH: 'endPath',\n      UNDO: 'undo',\n      REDO: 'redo',\n      TOOL_CHANGE: 'toolChange',\n      COLOR_CHANGE: 'cororChange',\n      PICK_VERSION: 'pickVersion',\n      MOVE: 'move'\n    };\n    Object.assign(this, events);\n    this.listeners = {};\n  }\n\n  on(event, cb) {\n    let callbacks = this.listeners[event] || [];\n    if (callbacks.indexOf(cb) === -1) callbacks.push(cb);\n    this.listeners[event] = callbacks;\n  }\n\n  emit(event) {\n    // console.log(arguments)\n    let callbacks = this.listeners[event] || [];\n    callbacks.forEach(callback => {\n      callback.apply({}, arguments);\n    });\n  }\n}\n\nexport default new EventBus();\n","import EventBus from './eventBus';\n\nexport const POINTER = 'Pointer';\nexport const PEN = 'Pen';\nexport const LINE = 'Line';\nexport const CIRCLE = 'Elipse';\nexport const RECT = 'Rect';\n\nclass ToolStore {\n  constructor() {\n    this.id = 'toolStore';\n    EventBus.on(EventBus.TOOL_CHANGE, this.toolChange.bind(this));\n    EventBus.on(EventBus.COLOR_CHANGE, this.colorChange.bind(this));\n    this.tool = PEN;\n    this.color = 'black';\n  }\n  subscribe(cb) {\n    EventBus.on(this.id, cb);\n  }\n  emitChanges() {\n    EventBus.emit(this.id);\n  }\n  toolChange(event, tool) {\n    this.tool = tool;\n    this.emitChanges();\n  }\n  colorChange(event, color) {\n    this.color = color;\n    this.emitChanges();\n  }\n}\n\nexport default new ToolStore();\n","import React from 'react';\n\nexport default class Line extends React.Component {\n  prepareData() {\n    let d = [\n      `M ${this.props.path[0].x} ${this.props.path[0].y}`,\n      `L ${this.props.path[this.props.path.length - 1].x} ${\n        this.props.path[this.props.path.length - 1].y\n      }`\n    ];\n\n    return d.join(' ');\n  }\n\n  render() {\n    let d = this.prepareData();\n    return <path d={d} fill=\"none\" strokeWidth={3} stroke={this.props.color} />;\n  }\n}\n","import React from 'react';\n\nexport default class Pen extends React.Component {\n  prepareData() {\n    let d = [`M ${this.props.path[0].x} ${this.props.path[0].y}`];\n\n    let collector = this.props.path.map(point => {\n      let xNext = point.x;\n      let yNext = point.y;\n      return `L ${xNext} ${yNext}`;\n    });\n\n    return d.concat(collector).join(' ');\n  }\n\n  render() {\n    let d = this.prepareData();\n    return <path d={d} fill=\"none\" strokeWidth={3} stroke={this.props.color} />;\n  }\n}\n","import React from 'react';\n\nexport default class Rect extends React.Component {\n  prepareData() {\n    let rect = {\n      x: this.props.path[0].x,\n      y: this.props.path[0].y,\n      width: Math.abs(\n        this.props.path[this.props.path.length - 1].x - this.props.path[0].x\n      ),\n      height: Math.abs(\n        this.props.path[this.props.path.length - 1].y - this.props.path[0].y\n      )\n    };\n    return rect;\n  }\n\n  render() {\n    let rect = this.prepareData();\n    return (\n      <rect\n        x={rect.x}\n        y={rect.y}\n        fill=\"none\"\n        strokeWidth={3}\n        width={rect.width}\n        height={rect.height}\n        stroke={this.props.color}\n      />\n    );\n  }\n}\n","import React from 'react';\n\nexport default class Circle extends React.Component {\n  prepareData() {\n    let circle = {\n      cx: this.props.path[0].x,\n      cy: this.props.path[0].y,\n      r: Math.abs(\n        this.props.path[this.props.path.length - 1].x - this.props.path[0].x\n      )\n    };\n    return circle;\n  }\n\n  render() {\n    let circle = this.prepareData();\n    return (\n      <circle\n        fill=\"none\"\n        r={circle.r}\n        cx={circle.cx}\n        cy={circle.cy}\n        strokeWidth={3}\n        stroke={this.props.color}\n      />\n    );\n  }\n}\n","import { CIRCLE, PEN } from './toolStore';\n\nexport function pointInsideRect(point, rect) {\n  return (\n    point.x >= rect.x &&\n    point.x <= rect.x + rect.width &&\n    point.y >= rect.y &&\n    point.y <= rect.y + rect.height\n  );\n}\n\nexport function getShapeRect(shape) {\n  const end = shape.path.length - 1;\n  if (shape.type === CIRCLE) {\n    const halfWidth = Math.abs(shape.path[0].x - shape.path[end].x);\n    const halfHeight = Math.abs(shape.path[0].y - shape.path[end].y);\n    return {\n      x: Math.min(shape.path[0].x, shape.path[end].x) - halfWidth,\n      y: Math.min(shape.path[0].y, shape.path[end].y) - halfHeight,\n      width: 2 * halfWidth,\n      height: 2 * halfHeight\n    };\n  } else if (shape.type === PEN) {\n    const minX = Math.min(...shape.path.map(p => p.x));\n    const maxX = Math.max(...shape.path.map(p => p.x));\n    const minY = Math.min(...shape.path.map(p => p.y));\n    const maxY = Math.max(...shape.path.map(p => p.y));\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  } else {\n    return {\n      x: Math.min(shape.path[0].x, shape.path[end].x),\n      y: Math.min(shape.path[0].y, shape.path[end].y),\n      width: Math.abs(shape.path[0].x - shape.path[end].x),\n      height: Math.abs(shape.path[0].y - shape.path[end].y)\n    };\n  }\n}\n","import Immutable from 'immutable';\nimport EventBus from './eventBus';\nimport ToolStore, { POINTER, PEN, LINE, CIRCLE, RECT } from './toolStore';\nimport Line from './components/shapes/line';\nimport Pen from './components/shapes/pen';\nimport Rect from './components/shapes/rect';\nimport Circle from './components/shapes/circle';\nimport { pointInsideRect, getShapeRect } from './utils';\n\nexport const SELECT = 'Select';\nexport const DRAW = 'Draw';\nexport const MOVE = 'Move';\nexport const RESIZE = 'Resize';\n\nconst mapTools = {};\nmapTools[LINE] = Line;\nmapTools[RECT] = Rect;\nmapTools[CIRCLE] = Circle;\nmapTools[PEN] = Pen;\n\nclass Store {\n  constructor() {\n    this.id = 'whiteBoardStore';\n    EventBus.on(EventBus.START_PATH, this.startPath.bind(this));\n    EventBus.on(EventBus.MOVE_PATH, this.movePath.bind(this));\n    EventBus.on(EventBus.END_PATH, this.endPath.bind(this));\n    EventBus.on(EventBus.UNDO, this.undo.bind(this));\n    EventBus.on(EventBus.REDO, this.redo.bind(this));\n    EventBus.on(EventBus.PICK_VERSION, this.pickVersion.bind(this));\n    EventBus.on(EventBus.MOVE, this.move.bind(this));\n\n    this.data = {\n      shapes: Immutable.List.of(),\n      selected: [],\n      mouseTracker: null\n    };\n    this.history = [this.data.shapes];\n    this.historyIndex = -1;\n    this.tool = Pen;\n    this.color = 'black';\n\n    ToolStore.subscribe(() => {\n      const tool = ToolStore.tool;\n      this.toolType = tool;\n      this.tool = mapTools[tool] || null;\n      this.color = ToolStore.color;\n    });\n  }\n  subscribe(cb) {\n    EventBus.on(this.id, cb);\n  }\n  emitChanges() {\n    EventBus.emit(this.id);\n  }\n  startPath(event, position) {\n    this.data.mouseTracker = {\n      class: this.tool,\n      type: this.toolType,\n      path: [position],\n      color: this.color\n    };\n    if (this.toolType === POINTER) {\n      this.selectShape(position);\n    }\n    this.emitChanges();\n  }\n  movePath(event, position) {\n    //console.log('position',position)\n    if (this.data.mouseTracker) {\n      this.data.mouseTracker.path.push(position);\n      this.emitChanges();\n    }\n  }\n  endPath(event, position) {\n    if (this.data.mouseTracker) {\n      this.data.mouseTracker.path.push(position);\n      if (this.toolType === POINTER) {\n        this.addVersion();\n      } else if (this.data.mouseTracker.class) {\n        this.addShapeToCanvas(this.data.mouseTracker);\n      }\n      this.data.mouseTracker = null;\n      this.emitChanges();\n    }\n  }\n  addShapeToCanvas(shape) {\n    this.data.shapes = this.data.shapes.push(shape);\n    this.data.mouseTracker = null;\n    this.addVersion();\n  }\n  selectShape(position) {\n    this.data.shapes = this.data.shapes.map(shape => {\n      if (pointInsideRect(position, getShapeRect(shape))) {\n        return { ...shape, selected: true };\n      } else {\n        return { ...shape, selected: false };\n      }\n    });\n  }\n  addVersion() {\n    this._catHistory();\n    this.history.push(this.data.shapes);\n    this.historyIndex = -1;\n  }\n\n  undo() {\n    if (this.history.length > 0) {\n      if (this.historyIndex === -1) this.historyIndex = this.history.length - 1;\n      this.pickVersion(null, this.historyIndex - 1);\n    }\n  }\n\n  redo() {\n    if (this.history.length > 0) {\n      if (this.historyIndex < 1) this.historyIndex = this.history.length + 1;\n      this.pickVersion(null, this.historyIndex + 1);\n    }\n  }\n\n  _catHistory() {\n    if (this.historyIndex >= 0) {\n      this.history.splice(\n        this.historyIndex + 1,\n        this.history.length - this.historyIndex - 1\n      );\n    }\n  }\n  pickVersion(event, index) {\n    // console.log(index);\n    if (this.history && this.history[index]) {\n      this.historyIndex = index;\n      let shapes = this.history[index];\n      this.data.shapes = shapes;\n      this.emitChanges();\n    }\n  }\n  move(event, { shape, move }) {\n    this.data.shapes = this.data.shapes.map(s => {\n      if (shape === s) {\n        return {\n          ...s,\n          path: s.path.map(({ x, y }) => ({\n            x: x + move.x,\n            y: y + move.y\n          }))\n        };\n      } else {\n        return s;\n      }\n    });\n  }\n}\n\nexport default new Store();\n","import React from 'react';\n\nexport default class Selection extends React.Component {\n  constructor() {\n    super();\n    this.startMove = this.startMove.bind(this);\n    this.endMove = this.endMove.bind(this);\n    this.onMove = this.onMove.bind(this);\n    this.startPoint = null;\n  }\n  startMove(e) {\n    e.preventDefault();\n    this.startPoint = { x: e.clientX, y: e.clientY };\n  }\n  endMove(e) {\n    e.preventDefault();\n    this.startPoint = null;\n  }\n  onMove(e) {\n    if (this.startPoint) {\n      e.preventDefault();\n      const move = {\n        x: e.clientX - this.startPoint.x,\n        y: e.clientY - this.startPoint.y\n      };\n      this.props.move(move);\n      this.startPoint = { x: e.clientX, y: e.clientY };\n    }\n  }\n\n  render() {\n    const { rect } = this.props;\n    return (\n      <rect\n        x={rect.x}\n        y={rect.y}\n        id=\"selection\"\n        width={rect.width}\n        height={rect.height}\n        onMouseUp={this.endMove}\n        onMouseMove={this.onMove}\n        onMouseDown={this.startMove}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport EventBus from '../eventBus';\nimport Store from '../store';\nimport Selection from './selection';\nimport { getShapeRect } from '../utils';\n\nexport default class WhiteBoard extends React.Component {\n  constructor() {\n    super();\n\n    Store.subscribe(() => {\n      this.setState({ data: Store.data });\n    });\n    this.state = { data: Store.data };\n    this.pressed = false;\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.mouseDown.bind(this));\n    document.addEventListener('mousemove', this.mouseMove.bind(this));\n    document.addEventListener('mouseup', this.mouseUp.bind(this));\n    document.addEventListener('keydown', this.keyDown.bind(this));\n    window.addEventListener('resize', this.onResize.bind(this));\n\n    this.onResize();\n    this.setState({ data: Store.data });\n  }\n\n  onResize() {\n    this.rect = this._svg.getBoundingClientRect();\n  }\n\n  mousePos(e) {\n    let round = 2;\n    return {\n      x: round * Math.round(e.clientX / round) - this.rect.left,\n      y: round * Math.round(e.clientY / round) - this.rect.top\n    };\n  }\n\n  _insideRect(rect, point) {\n    return (\n      point.x > rect.left &&\n      point.x < rect.right &&\n      point.y > rect.top &&\n      point.y < rect.bottom\n    );\n  }\n\n  mouseDown(e) {\n    if (this._insideRect(this.rect, { x: e.clientX, y: e.clientY })) {\n      this.pressed = true;\n      EventBus.emit(EventBus.START_PATH, this.mousePos(e));\n    }\n  }\n\n  mouseMove(e) {\n    if (this.pressed) {\n      EventBus.emit(EventBus.MOVE_PATH, this.mousePos(e));\n    }\n  }\n\n  mouseUp(e) {\n    this.pressed = false;\n    EventBus.emit(EventBus.END_PATH, this.mousePos(e));\n  }\n\n  keyDown(e) {\n    switch (e.keyCode) {\n      case 27: // escape\n        EventBus.emit(EventBus.UNDO);\n        break;\n      case 82: // KeyR\n        EventBus.emit(EventBus.REDO);\n        break;\n        default: // do nothing.\n    }\n  }\n  onMove(shape) {\n    return move => {\n      EventBus.emit(EventBus.MOVE, { shape, move });\n    };\n  }\n\n  render() {\n    const data = this.state.data;\n    let selection = null;\n    const shapes = data.shapes.map((shape, i) => {\n      if (shape.selected) {\n        selection = (\n          <Selection rect={getShapeRect(shape)} move={this.onMove(shape)} />\n        );\n      }\n      return <shape.class key={i} path={shape.path} color={shape.color} />;\n    });\n    let current = null;\n    if (data.mouseTracker && data.mouseTracker.class) {\n      current = (\n        <data.mouseTracker.class\n          color={data.mouseTracker.color}\n          path={data.mouseTracker.path}\n        />\n      );\n    }\n\n    return (\n      <svg\n        id=\"whiteBoard\"\n        width={this.props.width}\n        height={this.props.height}\n        ref={canvas => (this._svg = canvas)}\n      >\n        {shapes}\n        {current}\n        {selection}\n      </svg>\n    );\n  }\n}\n","import React from 'react';\nimport EventBus from '../eventBus';\nimport ToolStore from '../toolStore';\n\nexport default class ColorPicker extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      colors: [\n        'red',\n        'orange',\n        'yellow',\n        'green',\n        'blue',\n        'indigo',\n        'violet',\n        'black'\n      ],\n      selectedColorIndex: 7\n    };\n    ToolStore.subscribe(() => {\n      let selectedColor = ToolStore.color;\n      let selectedColorIndex = this.state.colors.indexOf(selectedColor);\n      this.setState({ selectedColorIndex: selectedColorIndex });\n    });\n  }\n  handleClick(index) {\n    return function() {\n      EventBus.emit(EventBus.COLOR_CHANGE, this.state.colors[index]);\n    };\n  }\n\n  render() {\n    let colors = this.state.colors.map((color, i) => {\n      let style = {\n        display: 'flex',\n        backgroundColor: color,\n        width: 20,\n        height: 20,\n        margin: 5\n      };\n      let borderStyle = {\n        display: 'flex',\n        border: this.state.selectedColorIndex === i ? '1px solid' : '',\n        margin: 1\n      };\n\n      return (\n        <div key={i} style={borderStyle}>\n          <div style={style} onClick={this.handleClick(i).bind(this)} />\n        </div>\n      );\n    });\n\n    return <div id=\"colors\"> {colors} </div>;\n  }\n}\n","import React from 'react';\nimport EventBus from '../eventBus';\nimport ToolStore, { POINTER, PEN, LINE, CIRCLE, RECT } from '../toolStore';\nimport ColorPicker from './colorPicker';\n\nexport default class Tools extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      tools: [\n        { id: POINTER, label: 'fa-mouse-pointer', type: 'cursor' },\n        { id: LINE, label: 'fa-minus', type: 'line' },\n        { id: RECT, label: 'fa-square-o', type: 'rect' },\n        { id: CIRCLE, label: 'fa-circle-thin', type: 'circle' },\n        { id: PEN, label: 'fa-pencil', type: 'pen', selected: true }\n      ]\n    };\n    ToolStore.subscribe(() => {\n      const tools = this.state.tools.map(tool => ({\n        ...tool,\n        selected: ToolStore.tool === tool.id\n      }));\n      this.setState({ tools });\n    });\n  }\n  handleClick(index) {\n    return function() {\n      EventBus.emit(EventBus.TOOL_CHANGE, this.state.tools[index].id);\n    };\n  }\n\n  render() {\n    const tools = this.state.tools.map((tool, i) => (\n      <div\n        key={i}\n        onClick={this.handleClick(i).bind(this)}\n        className={tool.selected ? 'selected' : ''}\n      >\n        <i className={tool.label + ' fa'} />\n      </div>\n    ));\n    return (\n      <div id=\"tools\">\n        {tools}\n        <ColorPicker />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport EventBus from '../eventBus';\nimport Store from '../store';\n\nexport default class History extends React.Component {\n  constructor() {\n    super();\n\n    Store.subscribe(() => {\n      this.setState({\n        history: Store.history,\n        selectedIndex: Store.historyIndex\n      });\n    });\n\n    this.state = {\n      history: [],\n      selectedIndex: -1\n    };\n  }\n\n  handleClick(index) {\n    return function() {\n      EventBus.emit(EventBus.PICK_VERSION, index);\n    };\n  }\n\n  render() {\n    let versions = this.state.history.map((version, i) => (\n      <span\n        key={i}\n        onClick={this.handleClick(i).bind(this)}\n        className={this.state.selectedIndex === i ? 'selected' : ''}\n      />\n    ));\n    return <div id=\"history\"> History: {versions} </div>;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport WhiteBoard from './components/whiteBoard';\nimport Tools from './components/tools';\nimport History from './components/history';\n\nReactDOM.render(\n  <div id=\"main\">\n    <div id=\"container\">\n      <Tools />\n      <WhiteBoard />\n    </div>\n    <History />\n  </div>,\n  document.getElementById('app')\n);\n"],"sourceRoot":""}